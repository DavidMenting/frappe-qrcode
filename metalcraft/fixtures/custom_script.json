[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Order", 
  "modified": "2016-09-12 14:57:09.468157", 
  "name": "Supplier Quotation-Client", 
  "script": "//Creates Console Verification Message\nconsole.log(\"PurchaseOrder.js Loaded Successfully\");\n\n//Fetches description for Quality Code Table\ncur_frm.add_fetch('code', 'description', 'description');\n\n//Creates new batches for line items.\nfrappe.ui.form.on(\"Purchase Order\", {\n    validate: function(frm, cdt, cdn) {\n        console.log(\"Batch Creator function triggered\");\n        var att = [];\n        var d = locals[cdt][cdn];\n        var ic = [];\n        frm.doc.items.forEach(function(d) {\n            ic.push(d.item_code);\n            console.log(ic);\n        });\n        if (frm.doc.workflow_state == \"Submitted\") {\n            for (var i = 0; i < ic.length; i++) {\n                console.log(\"Creating batch for \" + ic[i]);\n                doc = {\n                    \"doctype\": \"Batch\",\n                    \"batch_id\": (frm.doc.name + \"-\" + i),\n                    \"item\": ic[i],\n                    \"purchase_order\": frm.doc.name,\n                };\n\n                frappe.call({\n                    \"method\": \"frappe.client.insert\",\n                    \"args\": {\n                        \"doc\": doc\n                    }\n                });\n            }\n        }\n    }\n});\n", 
  "script_type": "Client"
 }
]
